<!DOCTYPE html>
<html lang="en" class="fontawesome-i2svg-active fontawesome-i2svg-complete">

<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DC8BS6X433"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DC8BS6X433');
</script>
  <meta charset="UTF-8">
  <title>LibEvolutionEval</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bulma and other CSS -->
  <link rel="stylesheet" href="src/bulma.min.css">
  <link rel="stylesheet" href="src/fontawesome.all.min.css">
  <link rel="stylesheet" href="src/index.css">
  
  <!-- Scripts -->
  <script src="src/jquery.min.js"></script>
  <script defer src="src/fontawesome.all.min.js"></script>
</head>

<body>

<!-- Hero Section -->
<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">
            LibEvolutionEval: A Benchmark and Study for Version-Specific Code Generation
          </h1>

          <!-- Subtitle or tag for NAACL 2025 (optional) -->
          <p class="subtitle is-5" style="margin-top: 0;">
            <span class="tag is-info">To Appear in NAACL 2025</span>
          </p>

          <!-- Authors List -->
          <div class="is-size-5 publication-authors" style="margin-top: 15px;">
            <!-- Link the first three authors with anchor tags pointing to personal websites -->
            <span class="author-block">
              <a href="https://sachitkuhar.github.io/" target="_blank">Sachit Kuhar</a>
              <sup>1</sup>,
            </span>
            <span class="author-block">
              <a href="https://wasiahmad.github.io/" target="_blank">Wasi Uddin Ahmad</a>
              <sup>2</sup>*,
            </span>
            <span class="author-block">
              <a href="https://zijianwang.me/" target="_blank">Zijian Wang</a>
              <sup>1</sup>,
            </span>

            <!-- Remaining authors without links -->
            <span class="author-block">Nihal Jain<sup>1</sup>,</span>
            <span class="author-block">Haifeng Qian<sup>2</sup>*,</span>
            <span class="author-block">Baishakhi Ray<sup>1</sup>,</span>
            <span class="author-block">Murali Krishna Ramanathan<sup>1</sup>,</span>
            <span class="author-block">Xiaofei Ma<sup>1</sup>,</span>
            <span class="author-block">Anoop Deoras<sup>1</sup></span>
          </div>

          <!-- Affiliations -->
          <div class="is-size-5 publication-authors">
            <span class="author-block"><sup>1</sup>AWS AI Labs,</span>
            <span class="author-block"><sup>2</sup>NVIDIA</span>
            <p class="has-text-centered" style="margin-top:10px;">
              <i>* Work done at AWS AI Labs</i>
            </p>
          </div>

          <!-- Links: only the paper link for now -->
          <div class="column has-text-centered">
            <div class="publication-links">
              <span class="link-block">
                <a href="https://arxiv.org/abs/2412.04478" class="external-link button is-normal is-rounded is-dark" target="_blank">
                  <span class="icon">
                    <i class="fas fa-file-pdf"></i>
                  </span>
                  <span>Paper</span>
                </a>
              </span>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>

<!-- TL;DR Section -->
<section class="hero teaser">
  <div class="container is-max-desktop">
    <div class="hero-body">
      <div style="subtitle has-text-centered">
        <h2 class="title is-3 has-text-centered">TL; DR</h2>
      </div>
      <br>
      <div class="content has-text-justified">
        Recent advancements in code completion models have often overlooked the evolving nature of public libraries. 
        <b>LIBEVOLUTIONEVAL</b> bridges this gap by providing a benchmark that rigorously tests 
        Large Language Models on version-specific code completion across multiple public libraries such as 
        PyTorch, Matplotlib, SciPy, and more. Our experiments show that model performance can vary significantly 
        when libraries undergo rapid version changes—APIs might be introduced, deprecated, or modified. We demonstrate 
        that providing version-aware context, such as retrieved documentation, helps but does not fully solve the 
        inherent challenges. We also show that embedding models themselves exhibit bias toward certain library versions, 
        highlighting the complexity of handling evolving public libraries in real-world development settings.
      </div>
      <p align="center">
        <!-- teaser.png -->
        <img src="teaser.png" width="100%" align="middle" class="center" alt="[LIBEVOLUTIONEVAL Teaser Image]">
      </p>
    </div>
  </div>
</section>

<!-- Abstract -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Abstract</h2>
        <div class="content has-text-justified">
          <p>
            Recent advancements in code completion models have primarily focused on either single-file contexts or entire repositories, 
            overlooking the critical challenge of fast-evolving public libraries. As libraries introduce, deprecate, or modify APIs across versions, 
            a model’s performance can vary significantly based on the year and version of the library in use. 
          </p>
          <p>
            We propose <b>LIBEVOLUTIONEVAL</b>, a benchmark and detailed study that explicitly evaluates code language models under version-specific code completion tasks. 
            Spanning multiple years and covering popular Python libraries, it provides both real-world GitHub-based examples and controlled, 
            documentation-based tasks. Our experiments with popular code LLMs and embedding models reveal that addressing library evolution 
            demands version-aware context. While retrieval of version-specific documentation can improve code completions, 
            it does not fully resolve version-dependent biases in the models, indicating the need for specialized training 
            techniques to handle rapid library changes.
          </p>
          <p>
            We hope that <b>LIBEVOLUTIONEVAL</b> inspires further research that incorporates temporal and version-specific knowledge 
            into code completion models, enabling them to reflect real-world software development more accurately.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Dataset Construction -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Dataset Construction</h2>
        <div class="content has-text-justified">
          <p>
            We gather real-world code usage from permissively licensed GitHub repositories and map each snippet to its corresponding library version 
            via <code>requirements.txt</code> and other metadata. To enable controlled experimentation, 
            we also generate synthetic tasks derived from official library documentation. 
          </p>
          <p>
            Each code completion prompt is annotated with the library version, focusing on 
            <b>introduced</b>, <b>deprecated</b>, <b>modified</b>, or <b>unchanged</b> APIs. 
            This annotation strategy allows us to assess how models handle evolving libraries in detail.
          </p>
          <p align="center">
            <!-- dataset_construction.png -->
            <img src="dataset_construction.png" class="center" width="80%" alt="[Dataset Construction Process]">
          </p>
          <br>
          <!-- Dataset Statistics Table -->
          <h3 class="title is-4">Dataset Statistics</h3>
          <table class="table is-bordered is-striped is-fullwidth">
            <thead>
              <tr>
                <th>Feature</th>
                <th>Assorted</th>
                <th>PyTorch</th>
                <th>Matplotlib</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td># API Documentations</td>
                <td>-</td>
                <td>29.4K</td>
                <td>35.6K</td>
              </tr>
              <tr>
                <td># Eval Examples</td>
                <td>4.5K</td>
                <td>20.1K</td>
                <td>10.1K</td>
              </tr>
              <tr>
                <td>Avg. # lines in prompt</td>
                <td>66.25</td>
                <td>104.91</td>
                <td>84.36</td>
              </tr>
              <tr>
                <td>Avg. # tokens in prompt</td>
                <td>732.06</td>
                <td>1149.34</td>
                <td>995.91</td>
              </tr>
            </tbody>
          </table>
          <p class="is-italic has-text-centered">Table 2: LIBEVOLUTIONEVAL statistics</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Main Results -->
<section class="section" id="main-results">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Main Results</h2>
        <div class="content has-text-justified">

          <!-- Introduce the polar plot first -->
          <p>
            Figure below illustrates the code completion performance (F1 score) of the StarCoder2, 
            Mistral, and GPT-4o-Mini models. As libraries evolve, these code LLMs show significant 
            variations in their ability to complete code correctly, indicating the need for 
            version-aware context.
          </p>

          <!-- Polar plot (Figure 5) -->
          <figure style="text-align: center; margin: 20px 0;">
            <img src="polar_leeval.png" alt="Polar Plot showing F1 scores" style="max-width: 70%;">
          </figure>

          <!-- Paragraph leading into the table -->
          <p>
            After examining overall trends from the polar plot, we present a more detailed breakdown of 
            results (see table below) focusing on two representative libraries — PyTorch and Matplotlib. 
            We evaluate three prompting strategies: <em>In-File (not version-aware)</em>, 
            <em>Version-Aware</em>, and <em>Version-Aware RAG</em>.
          </p>

          <!-- Example table with results -->
          <div class="table-container" style="overflow-x: auto;">
            <table class="table is-bordered is-striped" style="white-space: nowrap; width: 100%;">
              <thead>
                <tr>
                  <th>Model</th>
                  <th>Completion Strategy</th>
                  <th>Context Setting</th>
                  <th>PyTorch</th>
                  <th>Matplotlib</th>
                </tr>
              </thead>
              <tbody>
                <!-- StarCoder2-7B rows -->
                <tr>
                  <td rowspan="3">Starcoder2-7B</td>
                  <td>Fill-in-the-Middle</td>
                  <td>In-File (Not Version-Aware)</td>
                  <td>68.8</td>
                  <td>69.7</td>
                </tr>
                <tr>
                  <td></td>
                  <td>+ Version-Aware</td>
                  <td>69.3</td>
                  <td>70.1</td>
                </tr>
                <tr>
                  <td></td>
                  <td>+ Version-Aware RAG</td>
                  <td><b>73.3</b></td>
                  <td><b>75.4</b></td>
                </tr>

                <!-- Mistral-7B rows -->
                <tr>
                  <td rowspan="3">Mistral-7B</td>
                  <td>Left-Context Only</td>
                  <td>In-File (Not Version-Aware)</td>
                  <td>65.8</td>
                  <td>60.18</td>
                </tr>
                <tr>
                  <td></td>
                  <td>+ Version-Aware</td>
                  <td>66.04</td>
                  <td>61.2</td>
                </tr>
                <tr>
                  <td></td>
                  <td>+ Version-Aware RAG</td>
                  <td><b>67.6</b></td>
                  <td><b>69.05</b></td>
                </tr>

                <!-- GPT-4o-Mini rows -->
                <tr>
                  <td rowspan="3">GPT-4o-Mini</td>
                  <td>Instruction-based (w/ Example)</td>
                  <td>In-File (Not Version-Aware)</td>
                  <td>64.3</td>
                  <td>52.5</td>
                </tr>
                <tr>
                  <td></td>
                  <td>+ Version-Aware</td>
                  <td>64.78</td>
                  <td>53.1</td>
                </tr>
                <tr>
                  <td></td>
                  <td>+ Version-Aware RAG</td>
                  <td><b>70.14</b></td>
                  <td><b>66.7</b></td>
                </tr>
              </tbody>
            </table>
          </div>

          <p>
            We observe that performance generally improves with additional version-related context or retrieval. 
          </p>

        </div>
      </div>
    </div>
  </div>
</section>

<!-- Analysis Section -->
<section class="section" id="analysis">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Analysis</h2>
        <div class="content has-text-justified">
          <p>
            We present a collection of sub-figures that delve into crucial aspects of model performance, 
            covering scaling effects, in-file vs. version-aware retrieval, direct vs. indirect completions, and more.
          </p>
          
          <!-- Two columns per row: each image is half-width, so they appear larger -->
          <div class="columns is-multiline">
            
            <!-- Row 1 -->
            <div class="column is-half">
              <figure class="image">
                <img src="codesage_scale.png" alt="[CodeSage Scaling]" style="width: 100%;">
                <figcaption class="has-text-centered">MRR Scores for CodeSage Small and Large Models</figcaption>
              </figure>
            </div>
            <div class="column is-half">
              <figure class="image">
                <img src="scaling_starcoder.png" alt="[StarCoder Scaling]" style="width: 100%;">
                <figcaption class="has-text-centered">F1 Scores for Starcoder2 and StarCoder Models</figcaption>
              </figure>
            </div>

            <!-- Row 2 -->
            <div class="column is-half" style="margin-top: 15px;">
              <figure class="image">
                <img src="infile_rag.png" alt="[In-File vs RAG]" style="width: 100%;">
                <figcaption class="has-text-centered">In-File vs Version-Aware RAG Performance</figcaption>
              </figure>
            </div>
            <div class="column is-half" style="margin-top: 15px;">
              <figure class="image">
                <img src="direct_indirect.png" alt="[Direct vs Indirect Completions]" style="width: 100%;">
                <figcaption class="has-text-centered">Direct vs Indirect Code Completion</figcaption>
              </figure>
            </div>

            <!-- Row 3 -->
            <div class="column is-half" style="margin-top: 15px;">
              <figure class="image">
                <img src="overall_deprecated.png" alt="[Overall vs Deprecated]" style="width: 100%;">
                <figcaption class="has-text-centered">Overall vs Deprecated Set Code Completion</figcaption>
              </figure>
            </div>
            <div class="column is-half" style="margin-top: 15px;">
              <figure class="image">
                <img src="rag_em.png" alt="[MRR Scores CodeSage/OpenAI Ada]" style="width: 100%;">
                <figcaption class="has-text-centered">MRR Scores for CodeSage / OpenAI Ada</figcaption>
              </figure>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Temporal Analysis -->
<section class="section" id="temporal-analysis">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Temporal Analysis</h2>
        <div class="content has-text-justified">
          <p>
            In addition to overall performance, we examine how models handle rapidly changing libraries over time.
            Below, three tables illustrate scenarios for <b>Matplotlib</b> (deprecated vs. introduced APIs) 
            and <b>PyTorch</b> (introduced or deprecated) from different years:
          </p>

          <!-- Use Bulma columns to display sub-tables side-by-side -->
          <div class="columns is-multiline">
            <!-- First Table: Matplotlib Deprecated -->
            <div class="column is-one-third">
              <table class="table is-bordered is-striped is-hoverable" style="width: 100%;">
                <thead>
                  <tr>
                    <th colspan="3" class="has-text-centered">
                      StarCoder2 (Model Release: 2024) on Matplotlib Deprecated APIs
                    </th>
                  </tr>
                  <tr>
                    <th>Version Year</th>
                    <th>Deprecated API Score</th>
                    <th>Overall Score</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>2019</td>
                    <td><u>38.58</u></td>
                    <td><b>61.83</b></td>
                  </tr>
                  <tr>
                    <td>2020</td>
                    <td><u>43.93</u></td>
                    <td><b>60.12</b></td>
                  </tr>
                  <tr>
                    <td>2021</td>
                    <td>53.01</td>
                    <td><b>61.31</b></td>
                  </tr>
                  <tr>
                    <td>2022</td>
                    <td>52.74</td>
                    <td><b>65.15</b></td>
                  </tr>
                  <tr>
                    <td>2023</td>
                    <td>57.14</td>
                    <td><b>66.08</b></td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <!-- Second Table: Matplotlib Introduced -->
            <div class="column is-one-third">
              <table class="table is-bordered is-striped is-hoverable" style="width: 100%;">
                <thead>
                  <tr>
                    <th colspan="3" class="has-text-centered">
                      CodeGen 1.0 (Knowledge Cutoff: 2022) on Matplotlib Introduced APIs
                    </th>
                  </tr>
                  <tr>
                    <th>Version Year</th>
                    <th>Introduced API Score</th>
                    <th>Overall Score</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>2020</td>
                    <td>53.14</td>
                    <td><b>62.89</b></td>
                  </tr>
                  <tr>
                    <td>2021</td>
                    <td>54.23</td>
                    <td><b>62.85</b></td>
                  </tr>
                  <tr>
                    <td>2022</td>
                    <td>56.29</td>
                    <td><b>60.04</b></td>
                  </tr>
                  <tr>
                    <td>2023</td>
                    <td><u>44.08</u></td>
                    <td><b>59.44</b></td>
                  </tr>
                  <tr>
                    <td>2024</td>
                    <td><u>41.37</u></td>
                    <td><b>58.57</b></td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Third Table: PyTorch Introduced/Deprecated -->
            <div class="column is-one-third">
              <table class="table is-bordered is-striped is-hoverable" style="width: 100%;">
                <thead>
                  <tr>
                    <th colspan="3" class="has-text-centered">
                      StarCoder2 (Knowledge Cutoff: 2024) on PyTorch Introduced/Deprecated APIs
                    </th>
                  </tr>
                  <tr>
                    <th>Version Year</th>
                    <th>Deprec./Intro. API Score</th>
                    <th>Overall Score</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>2018</td>
                    <td>68.78</td>
                    <td><b>71.06</b></td>
                  </tr>
                  <tr>
                    <td>2020</td>
                    <td>59.10</td>
                    <td><b>75.45</b></td>
                  </tr>
                  <tr>
                    <td>2021</td>
                    <td>68.13</td>
                    <td><b>72.84</b></td>
                  </tr>
                  <tr>
                    <td>2022</td>
                    <td>60.93</td>
                    <td><b>71.02</b></td>
                  </tr>
                  <tr>
                    <td>2023</td>
                    <td>67.13</td>
                    <td><b>72.82</b></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- BibTeX -->
<section class="section" id="BibTeX">
  <div class="container is-max-desktop content">
    <h2 class="title">BibTeX</h2>
    <pre><code>@article{kuhar2024libevolutioneval,
  title={LibEvolutionEval: A Benchmark and Study for Version-Specific Code Generation},
  author={Kuhar, Sachit and Ahmad, Wasi Uddin and Wang, Zijian and Jain, Nihal and Qian, Haifeng and Ray, Baishakhi and Ramanathan, Murali Krishna and Ma, Xiaofei and Deoras, Anoop},
  journal={arXiv preprint arXiv:2412.04478},
  year={2024}
}</code></pre>
  </div>
</section>

<!-- Footer -->
<footer class="footer">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <p>
            <b>Note:</b> Our codebase and data for LIBEVOLUTIONEVAL are not publicly released yet. Stay tuned for updates.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

</body>
</html>
